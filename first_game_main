#include "Map.h"

Item item = { NULL };
int timer = 0;

void Print_timer() {
	gotoxy(130, 1);
	printf("AM 0%d : 00", timer / 1000);
	if (timer % 1000 == 0)
	{
		gotoxy(130, 1);
		printf("AM 0%d : 00", timer / 1000);
	}
	Sleep(50);
	timer++;
	if (timer / 1000 == 8)
	{
		while (1)
		{
			images(0, 0, 6);
		}
	}
}
char CHong_hall[30][100] = {
   {"00000000002XXXXXXXXXXXXX2YYYYYYYYYYYYYY2000000000"},
   {"0000000000200000000000002000000000000002000000000"},
   {"0031111111500000000000000000000000000006177711140"},
   {"00c00000000000000000000000000000000000000000000D0"},
   {"00c00000000000000000000000000000000000000000000D0"},
   {"00c0000000000000000000000000000000000000000000020"},
   {"00c0000000000000000000000000000000000000000000020"},
   {"00c000000000000000000000000000000000000000babkb20"},
   {"002000000000000000000000000000000000000000babab2000======================================="},
   {"115000000000000000000000H000000000000000000000061"},
   {"q00000000000000000000000B00000000000000000000000F"},
   {"q00000000000000000000000000000000000000000000000F"},
   {"q00000000000000000000000000000000000000000000000F"},
   {"q00000000000000000000000000000000000000000000000F"},
   {"q00000000000000000000000000000000000000000000000F"},
   {"q00000000000000000000003114000000000000000000000F"},
   {"q00000000000000000000002gg2000000000000000000000F"},
   {"140000000000000000000002gg20000000000000000000031"},
   {"0900000000000000000000061150000000000000000000090"},
   {"090000000000000000000000000000000000000000000009000======================================="},
   {"0900000000000000000000000000000000000000000000090"},
   {"0900000000000000000000000000000000000000000000090"},
   {"0900000000000000000000000000000000000000000000090"},
   {"0900000000000000000000000000000000000000000000090"},
   {"0900377777772777777740000000000000000000000000090"},
   {"0200200000000000000020000000000000000000000000090"},
   {"0200200000000000000020000000000000000000000000020"},
   {"0611e000000000000000f8888888888888888888888888850"},
   {"0000200000000000000020000000000000000000000000000"},
   {"0000677777772777777750000000000000000000000000000"}
};
char classroom[30][100] = {
   {"1111111111111111111111111111111111111111111111111"},
   {"1000000000000555555555555555555555500000000000001"},
   {"4000000000000000000000000000000000000000000000001"},
   {"4000000000000000000000000000000000000000002220001"},
   {"1000000000000000000000000000000000000000002220001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"10000033B330000003333300000033333000000333330000100666666666666666666666666666666666666666666"},
   {"1000000000000000000000000000000000000000000000001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"1000003333300000033333000000333330000003333300001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"10000000000000000000000SSSS0000000000000000000001"},
   {"10000000000000000000000SSSS0000000000000000000001"},
   {"10000000000000000000000SSSS0000000000000000000001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"100000333330000003333300000033K33000000333330000100666666666666666666666666666666666666666666"},
   {"1000000000000000000000000000000000000000000000001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"10000033C33000000333330000003333300000033A3300001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"4000000000000000000000000000000000000000000000001"},
   {"4000000000000000000000000000000000000000000000001"},
   {"1000000000000000000000000000000000000000000000001"},
   {"1111111111111111111111111111111111111111111111111"},
};
char door[30][100] = {
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000311111111111111140000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"00000000000000002000a000b000c00020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"000000000000000020000000000000002000000000000000000========================================"},
   {"00000000000000002000d000e000f00020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"00000000000000002000g000h000i00020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"00000000000000002000p000j000k00020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"000000000000000020031111111114002000000000000000000========================================"},
   {"0000000000000000200200000000020020000000000000000"},
   {"0000000000000000200299999999920020000000000000000"},
   {"0000000000000000200200000000020020000000000000000"},
   {"0000000000000000200200000000020020000000000000000"},
   {"0000000000000000200200000000020020000000000000000"},
   {"0000000000000000200611111111150020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"0000000000000000200000000000000020000000000000000"},
   {"0000000000000000611111111111111150000000000000000"},
   {"0000000000000000000000000000000000000000000000000"}
};//30줄 50칸
char bathroom[30][100] = {
   {"0000000000000000000000000000000000000000000000000"},
   {"000000000000031111111111c111111140000000000000000"},//
   {"0000000000000200000000002000000020000000000000000"},
   {"0000000000000200000000000000000K20000000000000000"},
   {"0000000000000b11114000000000000K20000000000000000"},
   {"0000000000000273142000002000000020000000000000000"},
   {"000000000000027202200000b1111111d0000000000000000"},//
   {"0000000000000272022000002000000020000000000000000"},
   {"0000000000000276152000000000000f2000000000000000000========================================"},
   {"0000000000000273142000000000000f20000000000000000"},
   {"0000000000000272022000002000000020000000000000000"},
   {"000000000000027202200000b1111111d0000000000000000"},//
   {"0000000000000276152000002000000020000000000000000"},
   {"0000000000000273142000000000000f20000000000000000"},
   {"0000000000000272022000000000000f20000000000000000"},
   {"0000000000000272022000002000000020000000000000000"},
   {"000000000000027615200000b1111111d0000000000000000"},//
   {"0000000000000273142000002000000020000000000000000"},
   {"0000000000000272022000000000000f20000000000000000"},
   {"0000000000000272022000000000000f2000000000000000000========================================"},
   {"0000000000000276152000002000000020000000000000000"},
   {"0000000000000b1111500000b111111150000000000000000"},//
   {"0000000000000200000000002000000000000000000000000"},
   {"0000000000000200000000002000000000000000000000000"},
   {"0000000000000200000000002000000000000000000000000"},
   {"0000000000000D00000000002000000000000000000000000"},
   {"0000000000000D00000000002000000000000000000000000"},
   {"0000000000000611111111115000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"}
};
char L_hall[30][100] = {
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000002"},
   {"000000000000000000000000000000000000000000000000200========================================"},
   {"311111177771111177111111111OOOO111111177111111115"},
   {"200000000000000000000000000000000000000000000000p"},
   {"200000000000000000000000000000000000000000000000p"},
   {"200000000000000000000000000000000000000000000000p"},
   {"200000000000000000000000000000000000000000000000p"},
   {"200000000000000000000000000000000000000000000000p"},
   {"200000000000000000000000000000000000000000000000p"},
   {"200000000000000000000000000000000000000000000000p"},
   {"20000000000000000000000000000000000000000000j000p"},
   {"611177111111CCCC111177111111111777711111177111114"},
   {"000000000000000000000000000000000000000000000000200========================================"},
   {"0000000000000000000000000000000000000000000000002"},
};
char R_hall[30][100] = {
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"2000000000000000000000000000000000000000000000000"},
   {"200000000000000000000000000000000000000000000000000======================================="},
   {"611111177771111177111111111RRRR111111177111111114"},
   {"G000000000000000000000000000000000000000000000008"},
   {"G000000000000000000000000000000000000000000000008"},
   {"G000000000000000000000000000000000000000000000008"},
   {"G000000000000000000000000000000000000000000000008"},
   {"G000000000000000000000000000000000000000000000008"},
   {"G000000000000000000000000000000000000000000000008"},
   {"G000000000000000000000000000000000000000000000008"},
   {"G000j00000000000000000000000000000000000000000008"},
   {"3111771111117777111177111111111CCCC11111177111115"},
   {"200000000000000000000000000000000000000000000000000======================================="},
   {"2000000000000000000000000000000000000000000000000"},
};
char C_hall[30][100] = {
   {"00000000002XXXXXXXXXXXXX2YYYYYYYYYYYYYY2000000000"},
   {"0000000000200000000000002000000000000002000000000"},
   {"0031111111500000000000000000000000000006177711140"},
   {"00c00000000000000000000000000000000000000000000D0"},
   {"00c00000000000000000000000000000000000000000000D0"},
   {"00c0000000000000000000000000000000000000000000020"},
   {"00c0000000000000000000000000000000000000000000020"},
   {"00c000000000000000000000000000000000000000babkb20"},
   {"002000000000000000000000000000000000000000babab2000======================================="},
   {"1150000000000000000000000000000000000000000000061"},
   {"q00000000000000000000000000000000000000000000000F"},
   {"q00000000000000000000000000000000000000000000000F"},
   {"q00000000000000000000000000000000000000000000000F"},
   {"q00000000000000000000000000000000000000000000000F"},
   {"q00000000000000000000000000000000000000000000000F"},
   {"q00000000000000000000003114000000000000000000000F"},
   {"q00000000000000000000002gg2000000000000000000000F"},
   {"140000000000000000000002gg20000000000000000000031"},
   {"0900000000000000000000061150000000000000000000090"},
   {"090000000000000000000000000000000000000000000009000======================================="},
   {"0900000000000000000000000000000000000000000000090"},
   {"0900000000000000000000000000000000000000000000090"},
   {"0900000000000000000000000000000000000000000000090"},
   {"0900000000000000000000000000000000000000000000090"},
   {"0900377777772777777740000000000000000000000000090"},
   {"0200200000000000000020000000000000000000000000090"},
   {"0200200000000000000020000000000000000000000000020"},
   {"0611e000000000000000f8888888888888888888888888850"},
   {"0000200000000000000020000000000000000000000000000"},
   {"0000677777772777777750000000000000000000000000000"}
};
char clubroom[30][100] = {

   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000003777777777777777711777777777777777774000"},
   {"0000000002000000000000000000000000020000020002000"},
   {"0000000002000000000000000000000000020000020002000"},
   {"000000000b111111111111111111111111150000020342000"},
   {"0000000002000gg0000gg0000gg0000gg000000002k222000"},
   {"0000000002000000000000000000000000000000g2k222000"},
   {"0000000002000000000000000000000000000000g2k22200000======================================="},
   {"000000000b11400000000000000000000000000002k222000"},
   {"000000000200P00000000gg000gg000gg0000000020652000"},
   {"000000000200P000003111111111111111140000020002000"},
   {"000000000b11d0000g200000000000000002g000020002000"},
   {"00000000020020000g200kkkk00000000002g000020342000"},
   {"000000000200200000203111140000000002000002k222000"},
   {"000000000b11d000002061111500000000020000g2k222000"},
   {"0000000002002000002000000000311114020000g2k222000"},
   {"00000000020020000g200000000061111502g00002k222000"},
   {"000000000b11d0000g20000000000kkkk002g000020652000"},
   {"000000000200200000200000000000000002000002000200000======================================="},
   {"0000000002002000006111111111OOO11115000006111d000"},
   {"000000000b11500000000gg000gg000gg0000000000002000"},
   {"0000000002000000000000000000000000000000000002000"},
   {"0000000002000000000000000000000000000000000002000"},
   {"000000000b11c114000000000000000000000000000002000"},
   {"000000000200200200000000000jjjj00000ffff000002000"},
   {"000000000200200200000000000jjjj00000ffff000002000"},
   {"000000000611e11e1aaaaaaa1111111111111111111115000"},
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"}
};
char officeroom[30][100] = {
   {"0000000000000000000000000000000000000000000000000"},
   {"0000000003777777777777777777777777777777777400000"},
   {"0000000002311114203111143111143111143111140200000"},
   {"00000000022000i2206111156111156111156111150200000"},
   {"00000000022000i2200kkkk00kkkk00kkkk00kkkk00200000"},
   {"0000000002b1111d200000000000000000000000000200000"},
   {"00000000026BBBB5611111111111111111111111111d00000"},
   {"00000000020000000000gg0000gg0000gg0000gg000200000"},
   {"000000000f00000000000000000000000000000000020000000======================================"},
   {"000000000f311400000000000000000000000000000200000"},
   {"000000000f20h200000000000000000000000000311d00000"},
   {"000000000f20h200000000000000000000000000200200000"},
   {"000000000f611500000000000000000003AAA400200200000"},
   {"000000000f000000000000000000000002000200b11d00000"},
   {"000000000f1114000000000000000000g20002g0200200000"},
   {"000000000f0002000000000000000000g20002g0200200000"},
   {"000000000f000200000000000000000002000200b11d00000"},
   {"000000000f0002g0000000000000000006AAA500200200000"},
   {"000000000f0002g0000000000000000000000000200200000"},
   {"000000000f000200000000000000000000000000611d0000000======================================"},
   {"000000000f0002000000000000jjjjjjjjjjjjjjjjj200000"},
   {"000000000f111500000003111111111111111111111500000"},
   {"000000000f000000000002000000000000000000000000000"},
   {"0000000002000000000002000000000000000000000000000"},
   {"0000000002000000000002000000000000000000000000000"},
   {"0000000002000000000002000000000000000000000000000"},
   {"0000000002000000000002000000000000000000000000000"},
   {"0000000002000000000002000000000000000000000000000"},
   {"000000000611aaaaaa1115000000000000000000000000000"},
   {"0000000000000000000000000000000000000000000000000"}
};

void LHall_move(int x, int y)
{
	char z = 0;
	int chr = 0;
	gotoxy(x, y);
	printf("●");
	gotoxy(x, y + 1);
	printf("▲");
	if (item.water == 1) {
		do {
			gotoxy(110, 14);
			printf("      아..목 마르다");
			z = _getch();
		} while (z != 0x7A);
		do {
			gotoxy(110, 14);
			printf("저기 정수기에서 물 먹어야겠다.");
			z = _getch();
		} while (z != 0x7A);
		gotoxy(110, 14);
		printf("                                ");
	}

	while (1)
	{
		Print_interface(item);
		if (item.first_Lhall == 0) { // 처음에 문열고 나왔을때
			do {
				gotoxy(110, 14);
				printf("  열렸다..!");
				z = _getch();
			} while (z != 0x7A);
			do {
				gotoxy(110, 14);
				printf("얼른 밖으로 나가자!");
				z = _getch();
			} while (z != 0x7A);
			gotoxy(110, 14);
			printf("                          ");
			item.first_Lhall++;
		}
		if (_kbhit())
		{
			chr = _getch();
		}
		gotoxy(x, y);
		printf("●");
		gotoxy(x, y + 1);
		printf("▲");
		if (chr == '0' || chr == 0xe0)
		{
			gotoxy(x, y);
			printf(" ");
			gotoxy(x, y + 1);
			printf(" ");

			chr = _getch();
			if (chr == UP)
			{
				if (L_hall[y - 1][x / 2] == '0')
				{
					y--;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (L_hall[y - 1][x / 2] == 'O')
				{
					z = _getch();
					if (z == 0x7A)
					{
						if (item.hall_key == 0)
						{
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("  여기는 오피스룸이다.");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("카드키가 있어야 열 수 있을 것 같다...");
							} while (z != 0x7A);
							gotoxy(105, 14);
							printf("                                     ");
						}

						if (item.hall_key == 1) {
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("아까 얻은 카드키를 사용한다...");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("삐빅...카드키가 정상적으로 작동했다.");
							} while (z != 0x7A);
							gotoxy(105, 14);
							printf("                                      ");
							item.hall_key = 2;
							item.overlap_officeroom = 1;
							system("cls");
							Draw_officeroom(officeroom);
							sndPlaySoundA("c.wav", SND_ASYNC);
							office_move(30, 25);
						}
						if (item.overlap_officeroom == 1) {
							system("cls");
							Draw_officeroom(officeroom);
							sndPlaySoundA("c.wav", SND_ASYNC);
							office_move(30, 25);
						}
					}
				}
			}

			else if (chr == DOWN)
			{
				if (L_hall[y + 2][x / 2] == '0')
				{
					y++;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (L_hall[y + 2][x / 2] == 'C')
				{
					z = _getch();
					if (z == 0x7A)
					{
						system("cls");
						Draw_classroom(classroom, 30, 100);
						sndPlaySoundA("c.wav", SND_ASYNC);
						Class_move(4, 3);
					}
				}
				if (L_hall[y + 2][x / 2] == 'j') {
					z = _getch();
					if (z == 0x7A)
					{
						do {
							z = _getch();
							gotoxy(110, 14);
							printf("...물 좀 마실까?");
						} while (z != 0x7A);
						do {
							z = _getch();
							gotoxy(110, 14);
							printf("                            ");
							gotoxy(110, 13);
							printf("1.마신다");
							gotoxy(110, 15);
							printf("2.안마신다");
						} while (z != '1'&&z != '2');
						gotoxy(110, 13);
						printf("                     ");
						gotoxy(110, 15);
						printf("                       ");
						if (z == '1') {
							if (item.water == 1) {
								do {
									gotoxy(110, 14);
									printf("꿀꺽꿀꺽...");
									z = _getch();
								} while (z != 0x7A);
								do {
									gotoxy(110, 14);
									printf("갈증이 해소되었다!");
									item.water++;
									z = _getch();
								} while (z != 0x7A);
								do {
									gotoxy(110, 14);
									printf("화장실에 가고싶어졌어!");
									item.water++;
									z = _getch();
								} while (z != 0x7A);
							}
							else {
								do {
									gotoxy(110, 14);
									printf("안돼!! 화장실이 급해!!! ");
									z = _getch();
								} while (z != 0x7A);
							}
							gotoxy(110, 14);
							printf("                          ");
						}
						if (z == '2') {
							do {
								z = _getch();
								gotoxy(110, 13);
								printf("                     ");
								gotoxy(110, 15);
								printf("                       ");
								gotoxy(110, 14);
								printf("얼른 탈줄할 방법이나 찾자!");
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                                       ");
						}
					}
				}
			}

			if (chr == LEFT)
			{
				if (L_hall[y][x / 2 - 1] == '0' && L_hall[y + 1][x / 2 - 1] == '0')
				{
					x = x - 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
			}
			else if (chr == RIGHT)
			{
				if (L_hall[y][x / 2 + 1] == '0' && L_hall[y + 1][x / 2 + 1] == '0')
				{
					x = x + 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (L_hall[y][x / 2 + 1] == 'p' && L_hall[y + 1][x / 2 + 1] == 'p')
				{
					system("cls");
					Draw_hall(C_hall);
					CHall_move(3, y);
				}
			}
		}
		Print_timer();
	}
}

void CHall_move(int x, int y)
{
	int i = 0;
	int chr = 0;
	char z = 0;
	gotoxy(x, y);
	printf("●");
	gotoxy(x, y + 1);
	printf("▲");
	while (1)
	{
		Print_interface(item);
		if (_kbhit())
		{
			chr = _getch();
		}
		gotoxy(x, y);
		printf("●");
		gotoxy(x, y + 1);
		printf("▲");
		if (chr == '0' || chr == 0xe0)
		{
			gotoxy(x, y);
			printf(" ");
			gotoxy(x, y + 1);
			printf(" ");

			chr = _getch();
			if (chr == UP)
			{
				if (C_hall[y - 1][x / 2] == '0')
				{
					y--;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
				if (C_hall[y - 1][x / 2] == 'Y') {
					do {
						gotoxy(105, 14);
						printf("   2층으로 올라갈 필요는 없어");
						z = _getch();
					} while (z != 0x7A);
					gotoxy(105, 14);
					printf("                              ");
				}
				if (C_hall[y - 1][x / 2] == 'X') {
					do {
						gotoxy(105, 14);
						printf("   지하는 무서우니까 가지말자!");
						z = _getch();
					} while (z != 0x7A);
					gotoxy(105, 14);
					printf("                                ");
				}
			}

			else if (chr == DOWN)
			{
				if (C_hall[y + 2][x / 2] == '0')
				{
					y++;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (C_hall[y + 2][x / 2] == 'k')
				{
					z = _getch();
					if (z == 0x7A)
					{
						if (item.hall_key == 0)
						{
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("쓰레기로 가득 차 있다...");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("  이걸...뒤져야 하나?..  ");
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                            ");
							do {
								z = _getch();
								gotoxy(110, 13);
								printf(" 1. 쓰레기통을 뒤진다. ");
								gotoxy(110, 15);
								printf(" 2. 더러워서 안한다. ");
							} while (z != '1' && z != '2');

							if (z == '1')
							{
								gotoxy(110, 13);
								printf("                                        ");
								gotoxy(110, 15);
								printf("                                     ");
								do {
									z = _getch();
									gotoxy(110, 14);
									printf("뒤적....뒤...적..");
								} while (z != 0x7A);
								gotoxy(110, 14);
								printf("                          ");
								do {
									z = _getch();
									gotoxy(110, 14);
									printf(".......");
								} while (z != 0x7A);
								gotoxy(110, 14);
								printf("             ");
								do {
									z = _getch();
									gotoxy(110, 14);
									printf("쓰레기통에서 카드키를 얻었다!!");
								} while (z != 0x7A);
								do {
									z = _getch();
									gotoxy(110, 14);
									printf("  어디를 여는 카드키일까?...      ");
								} while (z != 0x7A);
								gotoxy(110, 14);
								printf("                            ");
								item.hall_key = 1;
							}
							if (z == '2')
							{
								gotoxy(110, 13);
								printf("                           ");
								gotoxy(110, 15);
								printf("                                ");
								do {
									z = _getch();
									gotoxy(110, 14);
									printf("에라이!! 더러워서 안할거야!!!");
								} while (z != 0x7A);
								gotoxy(110, 14);
								printf("                              ");
							}
						}
					}
				}
				if (C_hall[y + 2][x / 2] == '2')
				{
					z = _getch();
					if (z == 0x7A)
					{
						if (item.bath_key == 1)
						{
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("이 문은 이 열쇠로 열리지 않는것같다...");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("에잇!! 이렇게 쉽게 탈출할수있을리가없나...");
							} while (z != 0x7A);
							gotoxy(105, 14);
							printf("                                            ");
						}
						if (item.bath_key == 0)
						{
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("(철컥철컥)");//대충 사운드 넣을수있으면 넣기
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("이럴수가 문이 잠겨있어...");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("열쇠가 필요해보여..한번 찾아볼까?");
							} while (z != 0x7A);
							gotoxy(105, 14);
							printf("                                            ");
						}
						if (item.Clear_key == 1)
						{
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("삐빅....");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("현관문이 열리고 밖으로 나간다...");
							} while (z != 0x7A);
							system("cls");
							Ending(item.Hong);
							char str0[] = "쪽지를 몇 개 찾았는지 볼까요???";
							for (i = 0; str0[i]; i++) {
								gotoxy(8 + i * 2, 8);
								printf("%c", str0[i]);
								Sleep(70);
							}
							do {
								z = _getch();
							} while (z != 0x7A);
							char str1[] = "두구두구두구...!!!";
							for (i = 0; str1[i]; i++) {
								gotoxy(8 + i * 2, 10);
								printf("%c", str1[i]);
								Sleep(70);
							}
							do {
								z = _getch();
							} while (z != 0x7A);
							gotoxy(10, 12);
							printf("%d", item.note);
							char str2[] = "개를 찾으셨군요!!!";
							for (i = 0; str2[i]; i++) {
								gotoxy(12 + i * 2, 12);
								printf("%c", str2[i]);
								Sleep(70);
							}
							do {
								z = _getch();
							} while (z != 0x7A);
							char str22[] = "당신은";
							for (i = 0; str22[i]; i++) {
								gotoxy(8 + i * 2, 14);
								printf("%c", str22[i]);
								Sleep(70);
							}
							gotoxy(24, 14);
							if (item.note == 0)
								printf("D+");
							if (item.note == 1)
								printf("C+");
							if (item.note == 2)
								printf("B0");
							if (item.note == 3)
								printf("B+");
							if (item.note == 4)
								printf("A0");
							if (item.note == 5)
								printf("A+");
							char str3[] = "입니다!!!";
							for (i = 0; str3[i]; i++) {
								gotoxy(26 + i * 2, 14);
								printf("%c", str3[i]);
								Sleep(70);
							}
							do {
								z = _getch();
							} while (z != 0x7A);
							exit(1);
						}
					}
				}
			}

			if (chr == LEFT)
			{
				if (C_hall[y][x / 2 - 1] == '0' && C_hall[y + 1][x / 2 - 1] == '0')
				{
					x = x - 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (C_hall[y][x / 2 - 1] == 'q' && C_hall[y + 1][x / 2 - 1] == 'q')
				{
					system("cls");
					Draw_hall(L_hall);
					LHall_move(91, y);
				}
			}
			else if (chr == RIGHT)
			{
				if (C_hall[y][x / 2 + 1] == '0' && C_hall[y + 1][x / 2 + 1] == '0')
				{
					x = x + 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (C_hall[y][x / 2 + 1] == 'F' && C_hall[y + 1][x / 2 + 1] == 'F')
				{
					system("cls");
					Draw_hall(R_hall);
					RHall_move(3, y);
				}

				if (C_hall[y][x / 2 + 1] == 'D' && C_hall[y + 1][x / 2 + 1] == 'D')
				{
					do {
						z = _getch();
						gotoxy(110, 14);
						printf(" 남자화장실 문이다. ");
					} while (z != 0x7A);
					gotoxy(110, 14);
					printf("                          ");
					if (z == 0x7A)
					{
						system("cls");
						Draw_bathroom(bathroom);
						sndPlaySoundA("c.wav", SND_ASYNC);
						Bath_move(30, 25);
					}
				}

			}
		}
		Print_timer();
	}
}

void Class_move(int x, int y)
{
	char z = 0;
	int ps;
	int answer = 0;
	int chr = 0;
	gotoxy(x, y);
	printf("●");
	gotoxy(x, y + 1);
	printf("▲");
	Print_interface(item);

	if (item.electronic == 0) {
		do {
			z = _getch();
			gotoxy(110, 14);
			printf("하아..큰일이다 내일 시험인데..");
		} while (z != 0x7A);
		do {
			z = _getch();
			gotoxy(110, 14);
			printf("  얼른 집가서 더 공부하자       ");
		} while (z != 0x7A);
		gotoxy(110, 14);
		printf("                                   ");
	}
	while (1)
	{
		Print_interface(item);
		if (_kbhit())
		{
			chr = _getch();
		}
		gotoxy(x, y);
		printf("●");
		gotoxy(x, y + 1);
		printf("▲");

		if (chr == '0' || chr == 0xe0)
		{
			gotoxy(x, y);
			printf(" ");
			gotoxy(x, y + 1);
			printf(" ");

			chr = _getch();
			if (chr == UP)
			{
				if (classroom[y - 1][x / 2] == '0' || classroom[y - 1][x / 2] == 'S')
				{
					y--;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
				if (classroom[y - 1][x / 2] == 'B') {
					z = _getch();
					if (z == 0x7A) {
						if (item.note == 0) {
							do {
								gotoxy(110, 14);
								printf("내가 공부하던 책상이다.");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("   어라?...              ");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("내 쪽지들이 어디갔지?..");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("내일 시험 요점만 다 정리한건데...");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("!..여기 한 장 떨어져있다           ");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("나머지 4장은 어디있지?...  ");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                                    ");
							item.note++;
						}
					}
				}
				if (classroom[y - 1][x / 2] == 'A') {
					z = _getch();
					if (z == 0x7A) {
						if (item.computer == 1 && item.eel == 0) {
							do {
								gotoxy(110, 14);
								printf("     (반짝)");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("  어라! 이건..건전지다!!");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("  얼른 도어락에 끼워보자  ");
								z = _getch();
							} while (z != 0x7A);
							item.eel++;
							gotoxy(110, 14);
							printf("                        ");
						}
						else if (item.eel == 1) {
							do {
								gotoxy(110, 14);
								printf(" 이제 아무것도 없다.  ");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                        ");
						}
					}
				}
				if (classroom[y - 1][x / 2] == 'C') {
					z = _getch();
					if (z == 0x7A) {
						if (item.eel == 2 && item.picture == 0) {
							do {
								gotoxy(110, 14);
								printf("어?..어?! 이럴수가!!!");
								z = _getch();
							} while (z != 0x7A);
							system("cls");
							gotoxy(104, 8);
							printf("========================================");
							gotoxy(104, 19);
							printf("========================================");
							do {
								gotoxy(110, 14);
								printf("내용이...바뀌었어!!!");
								images(0, 0, 3);
								images(0, 0, 3);
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("이게...어떻게 된 일이지?");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("그리고 이건 또 무슨 뜻이야...");
								z = _getch();
							} while (z != 0x7A);
							item.picture = 1;
							system("cls");
							Draw_classroom(classroom, 30, 100);
						}
						else if (item.picture == 1) {
							system("cls");
							gotoxy(104, 8);
							printf("========================================");
							gotoxy(104, 19);
							printf("========================================");
							do {
								gotoxy(110, 14);
								printf("이게 무슨 뜻이지...?");
								images(0, 0, 3);
								images(0, 0, 3);
								z = _getch();
							} while (z != 0x7A);
							system("cls");
							Draw_classroom(classroom, 30, 100);
						}
						if (item.computer == 1) {
							system("cls");
							gotoxy(104, 8);
							printf("========================================");
							gotoxy(104, 19);
							printf("========================================");
							do {
								gotoxy(110, 14);
								printf("무슨 좌표인가?...");
								images(0, 0, 2);
								images(0, 0, 2);
								z = _getch();
							} while (z != 0x7A);
							system("cls");
							Draw_classroom(classroom, 30, 100);
						}
						else if (item.computer == 0) {
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("어라..? 이 컴퓨터만 켜져있어");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("        이게 뭐야!!!       ");
							} while (z != 0x7A);
							system("cls");
							gotoxy(104, 8);
							printf("========================================");
							gotoxy(104, 19);
							printf("========================================");
							do {
								images(0, 0, 1);
								images(0, 0, 1);
								gotoxy(110, 14);
								printf(" 문제를 풀어야 할 것 같아...  ");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                                 ");
							gotoxy(110, 14);
							scanf("%d", &answer);
							images(0, 0, 1);
							images(0, 0, 1);

							if (answer == 12) {
								sndPlaySoundA("ring.wav", SND_ASYNC);
								do {
									item.electronic = 1;
									gotoxy(110, 14);
									printf("(띠딩)");
									images(0, 0, 2);
									images(0, 0, 2);
									z = _getch();
								} while (z != 0x7A);
								do {
									gotoxy(110, 14);
									printf("정답인가봐!");
									z = _getch();
								} while (z != 0x7A);
								do {
									gotoxy(110, 14);
									printf("어라 화면이...");
									z = _getch();
								} while (z != 0x7A);
								do {
									gotoxy(110, 14);
									printf("(4, 4)....?              ");
									z = _getch();
								} while (z != 0x7A);
								do {
									gotoxy(110, 14);
									printf("무슨 좌표인가?...");
									z = _getch();
								} while (z != 0x7A);
								item.computer = 1;
								system("cls");
								Draw_classroom(classroom, 30, 100);
							}
							else {
								do {
									gotoxy(110, 14);
									printf("아무일도 일어나지 않았어...");
									images(0, 0, 1);
									images(0, 0, 1);
									z = _getch();
								} while (z != 0x7A);
								system("cls");
								Draw_classroom(classroom, 30, 100);
							}
						}
					}
				}
				if (classroom[y - 1][x / 2] == 'K')
				{
					z = _getch();
					if (z == 0x7A)
					{
						if (item.class_key == 0)
						{
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("책상의자에 무언가 떨어져있다...");
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                               ");
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("어라! 카드키다!!!");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("이제 이걸로 문을 열수있어!!");
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                               ");
							item.class_key = 1;
						}
					}
				}
			}
			else if (chr == DOWN)
			{
				if (classroom[y + 2][x / 2] == '0' || classroom[y + 2][x / 2] == 'S')
				{
					y++;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

			}

			if (chr == LEFT)
			{
				if (classroom[y][x / 2 - 1] == '0' && classroom[y + 1][x / 2 - 1] == '0' || classroom[y][x / 2 - 1] == 'S' && classroom[y + 1][x / 2 - 1] == 'S')
				{
					x = x - 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (classroom[y][x / 2 - 1] == '4' && classroom[y + 1][x / 2 - 1] == '4')
				{
					char z = 0;
					z = _getch();
					if (z == 0x7A)
					{
						if (item.overlap == 0 && item.electronic == 0 || item.eel == 0) {
							system("cls");
							color(8);
							Draw_door(door);
							color(15);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("  (번호를 눌러도 반응이 없다) ");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("  어떡해!!! 완전히 갇혀버렸어....  ");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("  건전지가 없어서 작동을 안해...");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("    어딘가에 있지 않을까?...             ");
							} while (z != 0x7A);
							system("cls");
							Draw_classroom(classroom, 30, 100);
						}
						if (item.eel == 1) {
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("    철컥       ");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("   띠리링-     ");
								//사운드 있으면 사운드
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("좋았어! 이제 이 문만 열 수 있다면.. ");
								item.eel = 2;
							} while (z != 0x7A);
							gotoxy(105, 14);
							printf("                                           ");
							item.computer = 2;
						}
						else if (item.overlap == 0 && item.electronic == 1 && item.eel == 2)
						{
							system("cls");
							Draw_door(door);
							do {
								z = _getch();
								gotoxy(108, 14);
								printf("   굳게 잠겨있어.. ");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(108, 14);
								printf(" 비밀번호나 카드키가 필요해     ");
							} while (z != 0x7A);
							gotoxy(108, 14);
							printf("                                     ");
							do {
								gotoxy(110, 12);
								printf("1 . 비밀번호를 쳐본다. ");
								gotoxy(110, 14);
								printf("2 . 카드키를 찍는다. ");
								gotoxy(110, 16);
								printf("3 . 그만둔다. ");
								z = _getch();
							} while (z != '1' && z != '2' && z != '3');

							if (z == '1')
							{
								gotoxy(110, 12);
								printf("                                                         ");
								gotoxy(110, 14);
								printf("                                                     ");
								gotoxy(110, 16);
								printf("                                                  ");
								gotoxy(120, 14);
								scanf("%d", &ps);
								if (ps == 1214)
								{
									item.overlap = 1;
									system("cls");
									Draw_hall(L_hall);
									sndPlaySoundA("c.wav", SND_ASYNC);
									LHall_move(27, 14);
								}
								else
								{
									do {
										z = _getch();
										gotoxy(110, 14);
										printf("비밀번호가 일치하지않습니다.");
									} while (z != 0x7A);
									system("cls");
									Draw_classroom(classroom, 30, 100);
								}
							}
							if (z == '2')
							{
								if (item.overlap == 0 && item.class_key == 0)
								{
									gotoxy(110, 12);
									printf("                                                ");
									gotoxy(110, 14);
									printf("                                                ");
									gotoxy(110, 16);
									printf("                                                ");
									do {
										z = _getch();
										gotoxy(110, 14);
										printf("카드키가 없다....");
									} while (z != 0x7A);
									do {
										z = _getch();
										gotoxy(110, 14);
										printf("카드키를 찾으러가보자!");
									} while (z != 0x7A);
									system("cls");
									Draw_classroom(classroom, 30, 100);
								}

								if (item.class_key == 1)
								{
									gotoxy(110, 12);
									printf("                                                ");
									gotoxy(110, 14);
									printf("                                                ");
									gotoxy(110, 16);
									printf("                                                ");
									do {
										z = _getch();
										gotoxy(110, 14);
										printf("카드키를 갖다대었다...");
									} while (z != 0x7A);
									do {
										z = _getch();
										gotoxy(110, 14);
										printf("........삐빅!....       ");
									} while (z != 0x7A);
									do {
										z = _getch();
										gotoxy(105, 14);
										printf("카드키가 정상작동하며 문이 열렸다!!");
									} while (z != 0x7A);
									item.class_key = 1;
									system("cls");
									Draw_hall(L_hall);
									item.overlap = 1;
									sndPlaySoundA("c.wav", SND_ASYNC);
									LHall_move(27, 14);
								}
							}
							if (z == '3')
							{
								system("cls");
								Draw_classroom(classroom, 30, 100);
							}
						}
						if (item.overlap == 1)
						{
							system("cls");
							Draw_hall(L_hall);
							sndPlaySoundA("c.wav", SND_ASYNC);
							LHall_move(27, 14);
						}

					}
				}
				if (classroom[y][x / 2 - 1] == '5')
				{
					z = _getch();
					if (z == 0x7A)
					{
						if (item.overlap == 0 && item.class_ps == 0)
						{
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("스크린 뒤 화이트 보드에 무언가 적혀있다...");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("       으음... 1...2...1...4?...            ");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("    어딘가의 비밀번호 인 것 같다.");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("                  설마?...               ");
							} while (z != 0x7A);
							gotoxy(105, 14);
							printf("                                             ");
							item.class_ps = 1;
						}
					}
				}
			}
			else if (chr == RIGHT)
			{
				if (classroom[y][x / 2 + 1] == '0' && classroom[y + 1][x / 2 + 1] == '0' || classroom[y][x / 2 + 1] == 'S' && classroom[y + 1][x / 2 + 1] == 'S')
				{
					x = x + 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
			}
		}
		Print_timer();
	}
}

void RHall_move(int x, int y)
{
	char z = 0;
	int chr = 0;
	gotoxy(x, y);
	printf("●");
	gotoxy(x, y + 1);
	printf("▲");
	while (1)
	{
		Print_interface(item);
		if (_kbhit())
		{
			chr = _getch();
		}
		gotoxy(x, y);
		printf("●");
		gotoxy(x, y + 1);
		printf("▲");
		if (chr == '0' || chr == 0xe0)
		{
			gotoxy(x, y);
			printf(" ");
			gotoxy(x, y + 1);
			printf(" ");

			chr = _getch();
			if (chr == UP)
			{

				if (R_hall[y - 1][x / 2] == '0')
				{
					y--;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (R_hall[y - 1][x / 2] == 'R') {
					z = _getch();
					if (z == 0x7A) {
						if (item.bath_key == 1) {
							do {
								gotoxy(110, 14);
								printf("동아리방에 열쇠를 사용했다.");
								item.bath_key = 2;
								z = _getch();
							} while (z != 0x7A);
							system("cls");
							Draw_club(clubroom);
							sndPlaySoundA("c.wav", SND_ASYNC);
							Club_move(40, 25);
						}
						else if (item.bath_key == 2)
						{
							system("cls");
							Draw_club(clubroom);
							sndPlaySoundA("C:\\SOUND\\c.wav", SND_ASYNC);
							Club_move(40, 25);
						}
						else {
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("동아리방이다.");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("열쇠가 필요해 보인다.");
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                         ");
						}
					}
				}
			}
			else if (chr == DOWN)
			{
				if (R_hall[y + 2][x / 2] == '0')
				{
					y++;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (R_hall[y + 2][x / 2] == 'C')
				{
					z = _getch();
					if (z == 0x7A)
					{
						system("cls");
						Draw_classroom(classroom, 30, 100);
						sndPlaySoundA("c.wav", SND_ASYNC);
						Rclass_move(4, 3);
					}
				}
				if (R_hall[y + 2][x / 2] == 'j')
				{
					z = _getch();
					if (z == 0x7A)
					{
						do {
							z = _getch();
							gotoxy(110, 14);
							printf("목 마르다...물 마실까?");
						} while (z != 0x7A);
						do {
							z = _getch();
							gotoxy(110, 14);
							printf("                            ");
							gotoxy(110, 13);
							printf("1.마신다");
							gotoxy(110, 15);
							printf("2.안마신다");
						} while (z != '1'&&z != '2');
						if (z == '1') {
							do {
								gotoxy(110, 13);
								printf("                     ");
								gotoxy(110, 15);
								printf("                       ");
								z = _getch();
								gotoxy(110, 14);
								printf("아...이런 물컵이 없네");
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                       ");
						}
						if (z == '2') {
							do {
								z = _getch();
								gotoxy(110, 13);
								printf("                     ");
								gotoxy(110, 15);
								printf("                       ");
								gotoxy(110, 14);
								printf("얼른 탈출할 방법이나 찾자!");
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                                       ");
						}
					}
				}
			}

			if (chr == LEFT)
			{
				if (R_hall[y][x / 2 - 1] == 'G' && R_hall[y + 1][x / 2 - 1] == 'G')
				{
					system("cls");
					if (item.hint == 2)
					{
						Draw_hall(CHong_hall);
						CHongHall_move(91, y);
					}
					else if (item.hint < 2)
					{
						Draw_hall(C_hall);
						CHall_move(91, y);
					}
				}
				if (R_hall[y][x / 2 - 1] == '0' && R_hall[y + 1][x / 2 - 1] == '0')
				{
					x = x - 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (R_hall[y][x / 2 - 1] == 'G' && R_hall[y + 1][x / 2 - 1] == 'G')
				{
					system("cls");
					Draw_hall(C_hall);
					CHall_move(91, y);
				}
			}
			else if (chr == RIGHT)
			{
				if (R_hall[y][x / 2 + 1] == '0' && R_hall[y + 1][x / 2 + 1] == '0')
				{
					x = x + 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
			}
		}
		Print_timer();
	}
}

void Bath_move(int x, int y)
{
	char z = 0;
	int chr = 0;
	gotoxy(x, y);
	printf("●");
	gotoxy(x, y + 1);
	printf("▲");
	while (1)
	{
		Print_interface(item);
		if (_kbhit())
		{
			chr = _getch();
		}
		gotoxy(x, y);
		printf("●");
		gotoxy(x, y + 1);
		printf("▲");
		if (chr == '0' || chr == 0xe0)
		{
			gotoxy(x, y);
			printf(" ");
			gotoxy(x, y + 1);
			printf(" ");

			chr = _getch();
			if (chr == UP)
			{
				if (bathroom[y - 1][x / 2] == '0')
				{
					y--;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
			}

			else if (chr == DOWN)
			{
				if (bathroom[y + 2][x / 2] == '0')
				{
					y++;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
			}

			if (chr == LEFT)
			{
				if (bathroom[y][x / 2 - 1] == '0' && bathroom[y + 1][x / 2 - 1] == '0')
				{
					x = x - 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (bathroom[y][x / 2 - 1] == 'D' && bathroom[y + 1][x / 2 - 1] == 'D')
				{
					z = _getch();
					if (z == 0x7A)
					{
						system("cls");
						Draw_hall(C_hall);
						sndPlaySoundA("c.wav", SND_ASYNC);
						CHall_move(91, 3);
					}
				}
			}
			else if (chr == RIGHT)
			{
				if (bathroom[y][x / 2 + 1] == '0' && bathroom[y + 1][x / 2 + 1] == '0')
				{
					x = x + 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (bathroom[y][x / 2 + 1] == 'K' && bathroom[y + 1][x / 2 + 1] == 'K')
				{
					z = _getch();
					if (z == 0x7A)
					{
						do {
							z = _getch();
							gotoxy(110, 14);
							printf("변기위에 열쇠가 있다...");
						} while (z != 0x7A);
						do {
							z = _getch();
							gotoxy(110, 14);
							printf("어디열쇠인지는 모르겠다...");
						} while (z != 0x7A);
						do {
							z = _getch();
							gotoxy(105, 14);
							printf("도움이 될거같으니 일단 가져가자...");
						} while (z != 0x7A);
						do {
							z = _getch();
							gotoxy(105, 14);
							printf("         의문의 열쇠를 획득했다.             ");
						} while (z != 0x7A);
						gotoxy(105, 14);
						printf("                                     ");
						item.bath_key = 1;
					}
				}
				if (bathroom[y][x / 2 + 1] == 'f' && bathroom[y + 1][x / 2 + 1] == 'f') {
					z = _getch();
					if (z == 0x7A) {
						do {
							z = _getch();
							gotoxy(110, 14);
							printf("크흠..다른 변기를 쓰자...");
						} while (z != 0x7A);
						gotoxy(110, 14);
						printf("                         ");
					}
				}

			}
		}
		Print_timer();
	}
}

void Rclass_move(int x, int y)
{
	char z = 0;
	int ps;
	int chr = 0;
	int i = 0;
	string answer("우리집");
	string answer1;
	gotoxy(x, y);
	printf("●");
	gotoxy(x, y + 1);
	printf("▲");

	while (1)
	{
		Print_interface(item);
		if (_kbhit())
		{
			chr = _getch();
		}
		gotoxy(x, y);
		printf("●");
		gotoxy(x, y + 1);
		printf("▲");
		if (chr == '0' || chr == 0xe0)
		{
			gotoxy(x, y);
			printf(" ");
			gotoxy(x, y + 1);
			printf(" ");

			chr = _getch();
			if (chr == UP)
			{
				if (classroom[y - 1][x / 2] == '0' || classroom[y - 1][x / 2] == 'S')
				{
					y--;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
				if (classroom[y - 1][x / 2] == 'S') {
					if (item.screen == 0) {
						system("cls");
						printf("\t●〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓●");
						for (int i = 1; i < 20; i++) {
							gotoxy(14, i);
							printf("┃");
							gotoxy(74, i);
							printf("┃");
							Sleep(100);
						}
						printf("\n");
						printf("\t⊙━ ━ ┻ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ┻ ━ ━ ⊙");
						gotoxy(104, 8);
						printf("========================================");
						gotoxy(104, 19);
						printf("========================================");
						do {
							gotoxy(110, 14);
							printf("지이이이잉-");
							z = _getch();
						} while (z != 0x7A);
						do {
							gotoxy(110, 14);
							printf("뭐야! 저절로 스크린이 내려오고있어!!!");
							z = _getch();
						} while (z != 0x7A);
						do {
							gotoxy(110, 14);
							printf("           도대체 이게...!             ");
							z = _getch();
						} while (z != 0x7A);
						char str0[] = "크크크...";
						for (i = 0; str0[i]; i++) {
							gotoxy(16 + i * 2, 9);
							printf("%c", str0[i]);
							Sleep(100);
						}
						char str1[] = "열쇠를 찾고있는거야 ?";
						for (i = 0; str1[i]; i++) {
							gotoxy(16 + i * 2, 11);
							printf("%c", str1[i]);
							Sleep(100);
						}
						char str2[] = "불쌍해보이니까 힌트를 줄게";
						for (i = 0; str2[i]; i++) {
							gotoxy(16 + i * 2, 13);
							printf("%c", str2[i]);
							Sleep(100);
						}
						char str3[] = "쓰레기통을 뒤져봐";
						for (i = 0; str3[i]; i++) {
							gotoxy(16 + i * 2, 15);
							printf("%c", str3[i]);
							Sleep(100);
						}
						do {
							gotoxy(110, 14);
							printf("       쓰레기통을...?          ");
							z = _getch();
						} while (z != 0x7A);
						item.screen++;
						system("cls");
						Draw_classroom(classroom, 30, 100);
						Rclass_move(50, 15);
					}
				}
				if (classroom[y - 1][x / 2] == 'C') {
					z = _getch();
					if (z == 0x7A) {
						if (item.hint != 2) {
							do {
								gotoxy(110, 14);
								printf("이 컴퓨터는 암호가 걸려있네..");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("질문힌트 : 내가 사는 곳은??? ");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                                 ");
							gotoxy(110, 14);
							do {
								getline(cin, answer1);
							} while (answer1.empty() == true);
							if (answer == answer1) {
								sndPlaySoundA("ring.wav", SND_ASYNC);
								do {
									gotoxy(110, 14);
									printf("이게 정답이라니!!!!");
									z = _getch();
								} while (z != 0x7A);
								system("cls");
								gotoxy(104, 8);
								printf("========================================");
								gotoxy(104, 19);
								printf("========================================");
								printcard();
								do {
									gotoxy(104, 14);
									printf("이건...과건물 카드키 사용 내역인가?..");
									z = _getch();
								} while (z != 0x7A);
								do {
									gotoxy(104, 14);
									printf("         마지막이 홍길동 입실?...     ");
									z = _getch();
								} while (z != 0x7A);
								do {
									gotoxy(104, 14);
									printf("        길동이 퇴실내역이 없어....     ");
									z = _getch();
								} while (z != 0x7A);
								do {
									gotoxy(104, 14);
									printf("       그렇다면 아직...과건물 안에?...");
									z = _getch();
								} while (z != 0x7A);
								++item.hint;
								system("cls");
								Draw_classroom(classroom, 30, 100);
								Rclass_move(16, 25);
							}
						}
						if (item.hint == 2) {
							system("cls");
							gotoxy(104, 8);
							printf("========================================");
							gotoxy(104, 19);
							printf("========================================");
							printcard();
							do {
								gotoxy(110, 14);
								printf("      홍길동...");
								z = _getch();
							} while (z != 0x7A);
							system("cls");
							Draw_classroom(classroom, 30, 100);
							Rclass_move(16, 25);
						}
						else {
							do {
								gotoxy(110, 14);
								printf(" 에엥???..이걸 어떻게 알아!  ");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                                  ");
						}
					}
				}
			}
			else if (chr == DOWN)
			{
				if (classroom[y + 2][x / 2] == '0' || classroom[y + 2][x / 2] == 'S')
				{
					y++;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
				if (classroom[y + 2][x / 2] == '2') {
					char z = 0;
					z = _getch();
					if (z == 0x7A) {
						if (item.note == 1) {
							do {
								gotoxy(110, 14);
								printf("교탁 위에 종이가 어질러져있다.");
								z = getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("     왜 이렇게 더러워?...        ");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("가만보니...내 쪽지도 있잖아!!!");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("      얼른 가져가자             ");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                                      ");
							item.note++;
						}
					}
				}
				if (classroom[y + 2][x / 2] == 'S') {
					if (item.screen == 0) {
						system("cls");
						printf("\t●〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓●");
						for (int i = 1; i < 20; i++) {
							gotoxy(14, i);
							printf("┃");
							gotoxy(74, i);
							printf("┃");
							Sleep(100);
						}
						printf("\n");
						printf("\t⊙━ ━ ┻ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ┻ ━ ━ ⊙");
						gotoxy(104, 8);
						printf("========================================");
						gotoxy(104, 19);
						printf("========================================");
						do {
							gotoxy(110, 14);
							printf("지이이이잉-");
							z = _getch();
						} while (z != 0x7A);
						do {
							gotoxy(110, 14);
							printf("뭐야! 저절로 스크린이 내려오고있어!!!");
							z = _getch();
						} while (z != 0x7A);
						do {
							gotoxy(110, 14);
							printf("           도대체 이게...!             ");
							z = _getch();
						} while (z != 0x7A);
						char str0[] = "크크크...";
						for (i = 0; str0[i]; i++) {
							gotoxy(16 + i * 2, 9);
							printf("%c", str0[i]);
							Sleep(100);
						}
						char str1[] = "열쇠를 찾고있는거야 ?";
						for (i = 0; str1[i]; i++) {
							gotoxy(16 + i * 2, 11);
							printf("%c", str1[i]);
							Sleep(100);
						}
						char str2[] = "불쌍해보이니까 힌트를 줄게";
						for (i = 0; str2[i]; i++) {
							gotoxy(16 + i * 2, 13);
							printf("%c", str2[i]);
							Sleep(100);
						}
						char str3[] = "쓰레기통을 뒤져봐";
						for (i = 0; str3[i]; i++) {
							gotoxy(16 + i * 2, 15);
							printf("%c", str3[i]);
							Sleep(100);
						}
						do {
							gotoxy(110, 14);
							printf("       쓰레기통을...?          ");
							z = _getch();
						} while (z != 0x7A);
						item.screen++;
						system("cls");
						Draw_classroom(classroom, 30, 100);
						Rclass_move(50, 15);
					}
				}
			}
			if (chr == LEFT)
			{
				if (classroom[y][x / 2 - 1] == '0' && classroom[y + 1][x / 2 - 1] == '0' || classroom[y][x / 2 - 1] == 'S' && classroom[y + 1][x / 2 - 1] == 'S')
				{
					x = x - 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (classroom[y][x / 2 - 1] == '4' && classroom[y + 1][x / 2 - 1] == '4')
				{
					char z = 0;
					z = _getch();
					if (z == 0x7A)
					{
						system("cls");
						Draw_hall(R_hall);
						sndPlaySoundA("c.wav", SND_ASYNC);
						RHall_move(65, 16);

					}
				}
				if (classroom[y][x / 2 - 1] == 'S' && classroom[y + 1][x / 2 - 1] == 'S') {
					if (item.screen == 0) {
						system("cls");
						printf("\t●〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓●");
						for (int i = 1; i < 20; i++) {
							gotoxy(14, i);
							printf("┃");
							gotoxy(74, i);
							printf("┃");
							Sleep(100);
						}
						printf("\n");
						printf("\t⊙━ ━ ┻ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ┻ ━ ━ ⊙");
						gotoxy(104, 8);
						printf("========================================");
						gotoxy(104, 19);
						printf("========================================");
						do {
							gotoxy(110, 14);
							printf("지이이이잉-");
							z = _getch();
						} while (z != 0x7A);
						do {
							gotoxy(110, 14);
							printf("뭐야! 저절로 스크린이 내려오고있어!!!");
							z = _getch();
						} while (z != 0x7A);
						do {
							gotoxy(110, 14);
							printf("           도대체 이게...!             ");
							z = _getch();
						} while (z != 0x7A);
						char str0[] = "크크크...";
						for (i = 0; str0[i]; i++) {
							gotoxy(16 + i * 2, 9);
							printf("%c", str0[i]);
							Sleep(100);
						}
						char str1[] = "열쇠를 찾고있는거야 ?";
						for (i = 0; str1[i]; i++) {
							gotoxy(16 + i * 2, 11);
							printf("%c", str1[i]);
							Sleep(100);
						}
						char str2[] = "불쌍해보이니까 힌트를 줄게";
						for (i = 0; str2[i]; i++) {
							gotoxy(16 + i * 2, 13);
							printf("%c", str2[i]);
							Sleep(100);
						}
						char str3[] = "쓰레기통을 뒤져봐";
						for (i = 0; str3[i]; i++) {
							gotoxy(16 + i * 2, 15);
							printf("%c", str3[i]);
							Sleep(100);
						}
						do {
							gotoxy(110, 14);
							printf("       쓰레기통을...?          ");
							z = _getch();
						} while (z != 0x7A);
						item.screen++;
						system("cls");
						Draw_classroom(classroom, 30, 100);
						Rclass_move(50, 15);

					}
				}
			}
			else if (chr == RIGHT)
			{
				if (classroom[y][x / 2 + 1] == '0' && classroom[y + 1][x / 2 + 1] == '0' || classroom[y][x / 2 + 1] == 'S' && classroom[y + 1][x / 2 + 1] == 'S')
				{
					x = x + 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
				if (classroom[y][x / 2 + 1] == 'S' && classroom[y + 1][x / 2 + 1] == 'S') {
					if (item.screen == 0) {
						system("cls");
						printf("\t●〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓〓●");
						for (int i = 1; i < 20; i++) {
							gotoxy(14, i);
							printf("┃");
							gotoxy(74, i);
							printf("┃");
							Sleep(100);
						}
						printf("\n");
						printf("\t⊙━ ━ ┻ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ━ ┻ ━ ━ ⊙");
						gotoxy(104, 8);
						printf("========================================");
						gotoxy(104, 19);
						printf("========================================");
						do {
							gotoxy(110, 14);
							printf("지이이이잉-");
							z = _getch();
						} while (z != 0x7A);
						do {
							gotoxy(110, 14);
							printf("뭐야! 저절로 스크린이 내려오고있어!!!");
							z = _getch();
						} while (z != 0x7A);
						do {
							gotoxy(110, 14);
							printf("           도대체 이게...!             ");
							z = _getch();
						} while (z != 0x7A);
						char str0[] = "크크크...";
						for (i = 0; str0[i]; i++) {
							gotoxy(16 + i * 2, 9);
							printf("%c", str0[i]);
							Sleep(100);
						}
						char str1[] = "열쇠를 찾고있는거야 ?";
						for (i = 0; str1[i]; i++) {
							gotoxy(16 + i * 2, 11);
							printf("%c", str1[i]);
							Sleep(100);
						}
						char str2[] = "불쌍해보이니까 힌트를 줄게";
						for (i = 0; str2[i]; i++) {
							gotoxy(16 + i * 2, 13);
							printf("%c", str2[i]);
							Sleep(100);
						}
						char str3[] = "쓰레기통을 뒤져봐";
						for (i = 0; str3[i]; i++) {
							gotoxy(16 + i * 2, 15);
							printf("%c", str3[i]);
							Sleep(100);
						}
						do {
							gotoxy(110, 14);
							printf("       쓰레기통을...?          ");
							z = _getch();
						} while (z != 0x7A);
						item.screen++;
						system("cls");
						Draw_classroom(classroom, 30, 100);
						Rclass_move(50, 15);
					}
				}
			}
		}
		Print_timer();
	}
}

void office_move(int x, int y) //오피스룸으로 다시 안들어가짐
{
	char z = 0;
	int chr = 0;
	gotoxy(x, y);
	printf("●");
	gotoxy(x, y + 1);
	printf("▲");
	if (item.first_officeroom == 0) {
		do {
			gotoxy(105, 14);
			printf("  카드키에서 역겨운 냄새가 난다...");
			z = _getch();
		} while (z != 0x7A);
		do {
			gotoxy(105, 14);
			printf("킁...이제 쓸데없으니까 버려두자...");
			z = _getch();
		} while (z != 0x7A);
		gotoxy(105, 14);
		printf("                                        ");
		item.first_officeroom++;
	}
	while (1)
	{
		Print_interface(item);
		if (_kbhit())
		{
			chr = _getch();
		}
		gotoxy(x, y);
		printf("●");
		gotoxy(x, y + 1);
		printf("▲");
		if (chr == '0' || chr == 0xe0)
		{
			gotoxy(x, y);
			printf(" ");
			gotoxy(x, y + 1);
			printf(" ");

			chr = _getch();
			if (chr == UP)
			{
				if (officeroom[y - 1][x / 2] == '0')
				{
					y--;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
				if (officeroom[y - 1][x / 2] == 'A') {
					z = _getch();
					if (z == 0x7A) {
						if (item.note == 2) {
							do {
								gotoxy(110, 14);
								printf("어랏! 내 쪽지다!!");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("왜 이런 곳에...    ");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(106, 14);
								printf("이제 두 개만 더 찾으면 된다!  ");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(106, 14);
							printf("                                 ");
							item.note++;
						}
						else if (item.note == 2)
						{
							do {
								gotoxy(110, 14);
								printf("책상 위에 아무것도 없다.");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                            ");
						}
					}
				}
				if (officeroom[y - 1][x / 2] == 'B') {
					if (item.hint == 0) {
						z = _getch();
						if (z == 0x7A) {
							do {
								gotoxy(110, 14);
								printf("프린터기다.");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("              ");
							do {
								gotoxy(110, 13);
								printf("복사가 실패하였습니다.");
								gotoxy(110, 15);
								printf("재시도는 확인을 눌러주세요.");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 13);
							printf("                            ");
							gotoxy(110, 15);
							printf("                             ");
							do {
								gotoxy(110, 14);
								printf("엥 뭐지?..한 번 해볼까?..");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("     지이이이이잉-        ");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("  종이에 무슨 글씨가 적혀있어..      ");
								z = _getch();
							} while (z != 0x7A);
							system("cls");
							gotoxy(104, 8);
							printf("========================================");
							gotoxy(104, 19);
							printf("========================================");
							do {
								gotoxy(110, 14);
								printf("         '우리집'             ");
								images(0, 0, 5);
								images(0, 0, 5);
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("'우리집'?..그냥 테스트용인가봐");
								z = _getch();
							} while (z != 0x7A);
							system("cls");
							++item.hint;
							item.water++;
							Draw_officeroom(officeroom);
							office_move(24, 7);
						}
					}
					if (item.hint == 1) {
						z = _getch();
						if (z == 0x7A) {
							system("cls");
							gotoxy(104, 8);
							printf("========================================");
							gotoxy(104, 19);
							printf("========================================");
							do {
								gotoxy(110, 14);
								printf("   '우리집'....?");
								images(0, 0, 5);
								images(0, 0, 5);
								z = _getch();
							} while (z != 0x7A);
							system("cls");
							Draw_officeroom(officeroom);
							office_move(24, 7);
						}
					}
				}
			}
			else if (chr == DOWN)
			{
				if (officeroom[y + 2][x / 2] == '0')
				{
					y++;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (officeroom[y + 2][x / 2] == 'a')
				{
					z = _getch();
					if (z == 0x7A)
					{
						system("cls");
						Draw_hall(L_hall);
						sndPlaySoundA("c.wav", SND_ASYNC);
						LHall_move(55, 10);
					}
				}
				if (officeroom[y + 2][x / 2] == 'A') {
					z = _getch();
					if (z == 0x7A) {
						if (item.note == 2) {
							do {
								gotoxy(110, 14);
								printf("어랏! 내 쪽지다!!");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("왜 이런 곳에...    ");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                       ");
							item.note++;
						}
					}
				}
			}
			if (chr == LEFT)
			{
				if (officeroom[y][x / 2 - 1] == '0' && officeroom[y + 1][x / 2 - 1] == '0')
				{
					x = x - 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

			}
			else if (chr == RIGHT)
			{
				if (officeroom[y][x / 2 + 1] == '0' && officeroom[y + 1][x / 2 + 1] == '0')
				{
					x = x + 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
			}
		}
		Print_timer();
	}
}
void Club_move(int x, int y)
{
	char z = 0;
	int chr = 0;
	gotoxy(x, y);
	printf("●");
	gotoxy(x, y + 1);
	printf("▲");
	while (1)
	{
		Print_interface(item);
		if (_kbhit())
		{
			chr = _getch();
		}
		gotoxy(x, y);
		printf("●");
		gotoxy(x, y + 1);
		printf("▲");
		if (chr == '0' || chr == 0xe0)
		{
			gotoxy(x, y);
			printf(" ");
			gotoxy(x, y + 1);
			printf(" ");

			chr = _getch();
			if (chr == UP)
			{
				if (clubroom[y - 1][x / 2] == '0')
				{
					y--;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (clubroom[y - 1][x / 2] == 'O')
				{
					z = _getch();
					if (z == 0x7A)
					{
						do {
							gotoxy(110, 14);
							printf("  현관카드키를 발견했다.");
							z = _getch();
						} while (z != 0x7A);
						do {
							gotoxy(110, 14);
							printf("드디어...탈출할 수 있어!!!");
							item.Clear_key = 1;
							Print_interface(item);
							z = _getch();
						} while (z != 0x7A);
						gotoxy(110, 14);
						printf("                              ");
					}
				}
			}
			else if (chr == DOWN)
			{
				if (clubroom[y + 2][x / 2] == '0')
				{
					y++;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (clubroom[y + 2][x / 2] == 'a')
				{
					z = _getch();
					if (z == 0x7A)
					{
						system("cls");
						Draw_hall(R_hall);
						sndPlaySoundA("c.wav", SND_ASYNC);
						RHall_move(55, 10);
					}
				}
			}
			if (chr == LEFT)
			{
				if (clubroom[y][x / 2 - 1] == '0' && clubroom[y + 1][x / 2 - 1] == '0')
				{
					x = x - 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
				if (clubroom[y][x / 2 - 1] == 'P' && clubroom[y + 1][x / 2 - 1] == 'P') {
					z = _getch();
					if (z == 0x7A) {
						if (item.note == 3) {
							do {
								gotoxy(110, 14);
								printf("    내 쪽지! 또 찾았다!!!");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("마지막 하나는 어디에 있을까?...");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                                ");
							item.note++;
						}
					}
				}
			}
			else if (chr == RIGHT)
			{
				if (clubroom[y][x / 2 + 1] == '0' && clubroom[y + 1][x / 2 + 1] == '0')
				{
					x = x + 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
			}
		}
		Print_timer();
	}
}
void CHongHall_move(int x, int y)
{
	int i = 0;
	int chr = 0;
	char z = 0;
	gotoxy(x, y);
	printf("●");
	gotoxy(x, y + 1);
	printf("▲");
	while (1)
	{
		Print_interface(item);
		if (_kbhit())
		{
			chr = _getch();
		}
		gotoxy(x, y);
		printf("●");
		gotoxy(x, y + 1);
		printf("▲");
		if (chr == '0' || chr == 0xe0)
		{
			gotoxy(x, y);
			printf(" ");
			gotoxy(x, y + 1);
			printf(" ");

			chr = _getch();
			if (chr == UP)
			{
				if (CHong_hall[y - 1][x / 2] == '0')
				{
					y--;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");
				if (CHong_hall[y - 1][x / 2] == 'Y') {
					do {
						gotoxy(105, 14);
						printf("   2층으로 올라갈 필요는 없어");
						z = _getch();
					} while (z != 0x7A);
					gotoxy(105, 14);
					printf("                              ");
				}
				if (CHong_hall[y - 1][x / 2] == 'X') {
					do {
						gotoxy(105, 14);
						printf("   지하는 무서우니까 가지말자!");
						z = _getch();
					} while (z != 0x7A);
					gotoxy(105, 14);
					printf("                                ");
				}
			}

			else if (chr == DOWN)
			{
				if (CHong_hall[y + 2][x / 2] == '0')
				{
					y++;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (CHong_hall[y + 2][x / 2] == 'k')
				{
					z = _getch();
					if (z == 0x7A)
					{
						if (item.hall_key == 0)
						{
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("쓰레기통에 뭔가있을것같다...");
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                            ");
							do {
								z = _getch();
								gotoxy(110, 13);
								printf(" 1. 쓰레기통을 뒤져본다. ");
								gotoxy(110, 15);
								printf(" 2. 더러워서 안한다. ");
							} while (z != '1' && z != '2');

							if (z == '1')
							{
								gotoxy(110, 13);
								printf("                                        ");
								gotoxy(110, 15);
								printf("                                     ");
								do {
									z = _getch();
									gotoxy(110, 14);
									printf("뒤적....뒤...적..");
								} while (z != 0x7A);
								gotoxy(110, 14);
								printf("                          ");
								do {
									z = _getch();
									gotoxy(110, 14);
									printf(".......");
								} while (z != 0x7A);
								gotoxy(110, 14);
								printf("             ");
								do {
									z = _getch();
									gotoxy(110, 14);
									printf("쓰레기통에서 카드키를 얻었다!!");
								} while (z != 0x7A);
								do {
									z = _getch();
									gotoxy(110, 14);
									printf("어디를 여는 카드키일까?...      ");
								} while (z != 0x7A);
								gotoxy(110, 14);
								printf("                            ");
								item.hall_key = 1;
							}
							if (z == '2')
							{
								gotoxy(110, 13);
								printf("                           ");
								gotoxy(110, 15);
								printf("                                ");
								do {
									z = _getch();
									gotoxy(110, 14);
									printf("에라이!! 더러워서 안할거야!!!");
								} while (z != 0x7A);
								gotoxy(110, 14);
								printf("                              ");
							}
						}
					}
				}
				if (CHong_hall[y + 2][x / 2] == '2')
				{
					z = _getch();
					if (z == 0x7A)
					{
						if (item.bath_key == 1)
						{
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("이 문은 이 열쇠로 열리지 않는것같다...");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("에잇!! 이렇게 쉽게 탈출할수있을리가없나...");
							} while (z != 0x7A);
							gotoxy(105, 14);
							printf("                                            ");
						}
						if (item.bath_key == 0)
						{
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("(철컥철컥)");//대충 사운드 넣을수있으면 넣기
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("이럴수가 문이 잠겨있어...");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(105, 14);
								printf("열쇠가 필요해보여..한번 찾아볼까?");
							} while (z != 0x7A);
							gotoxy(105, 14);
							printf("                                            ");
						}
						if (item.Clear_key == 1)
						{
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("삐빅....");
							} while (z != 0x7A);
							do {
								z = _getch();
								gotoxy(110, 14);
								printf("현관문이 열리고 밖으로 나간다...");
							} while (z != 0x7A);
							system("cls");
							Ending(item.Hong);

							char str4[] = "쪽지를 몇 개 찾았는지 볼까요???";
							for (i = 0; str4[i]; i++) {
								gotoxy(8 + i * 2, 8);
								printf("%c", str4[i]);
								Sleep(70);
							}
							do {
								z = _getch();
							} while (z != 0x7A);
							char str5[] = "두구두구두구...!!!";
							for (i = 0; str5[i]; i++) {
								gotoxy(8 + i * 2, 10);
								printf("%c", str5[i]);
								Sleep(70);
							}
							do {
								z = _getch();
							} while (z != 0x7A);
							gotoxy(10, 12);
							printf("%d", item.note);
							char str6[] = "개를 찾으셨군요!!!";
							for (i = 0; str6[i]; i++) {
								gotoxy(12 + i * 2, 12);
								printf("%c", str6[i]);
								Sleep(70);
							}
							do {
								z = _getch();
							} while (z != 0x7A);
							char str7[] = "당신은";
							for (i = 0; str7[i]; i++) {
								gotoxy(8 + i * 2, 14);
								printf("%c", str7[i]);
								Sleep(70);
							}
							gotoxy(24, 14);
							if (item.note == 0)
								printf("D+");
							if (item.note == 1)
								printf("C+");
							if (item.note == 2)
								printf("B0");
							if (item.note == 3)
								printf("B+");
							if (item.note == 4)
								printf("A0");
							if (item.note == 5)
								printf("A+");
							char str8[] = "입니다!!!";
							for (i = 0; str8[i]; i++) {
								gotoxy(26 + i * 2, 14);
								printf("%c", str8[i]);
								Sleep(70);
							}
							do {
								z = _getch();
							} while (z != 0x7A);
							exit(1);
						}
					}
				}
			}

			if (chr == LEFT)
			{
				if (CHong_hall[y][x / 2 - 1] == '0' && CHong_hall[y + 1][x / 2 - 1] == '0')
				{
					x = x - 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (CHong_hall[y][x / 2 - 1] == 'q' && CHong_hall[y + 1][x / 2 - 1] == 'q')
				{
					system("cls");
					Draw_hall(L_hall);
					LHall_move(91, y);
				}
				if (CHong_hall[y][x / 2 - 1] == 'H') {
					z = _getch();
					if (z == 0x7A) {
						if (item.Hong == 0) {
							do {
								gotoxy(110, 14);
								printf("홍길동...니가 지금까지..!");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								printf("왜 나에게 이런 짓을 한거야!!!");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								color(6);
								printf("미안 열심히 공부하고있는 널 보니..");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								color(6);
								printf("       그만 화가나서!!!...       ");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(110, 14);
								color(6);
								printf("정말 미안해..여기 쪽지야..       ");
								z = _getch();
							} while (z != 0x7A);
							color(15);
							do {
								gotoxy(110, 14);
								printf("후우...얼른 집으로 돌아가자..");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(110, 14);
							printf("                                        ");
							item.note++;
							item.Hong++;
						}
					}
				}
			}
			else if (chr == RIGHT)
			{
				if (CHong_hall[y][x / 2 + 1] == '0' && CHong_hall[y + 1][x / 2 + 1] == '0')
				{
					x = x + 2;
				}
				gotoxy(x, y);
				printf("●");
				gotoxy(x, y + 1);
				printf("▲");

				if (CHong_hall[y][x / 2 + 1] == 'F' && CHong_hall[y + 1][x / 2 + 1] == 'F')
				{
					system("cls");
					Draw_hall(R_hall);
					RHall_move(3, y);
				}
				if (CHong_hall[y][x / 2 + 1] == 'H') {
					z = _getch();
					if (z == 0x7A) {
						if (item.Hong == 0) {
							do {
								gotoxy(105, 14);
								printf("홍길동...니가 지금까지..!");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(105, 14);
								printf("왜 나에게 이런 짓을 한거야!!!");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(105, 14);
								color(6);
								printf("미안 열심히 공부하고있는 널 보니..");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(105, 14);
								color(6);
								printf("      그만 화가나서!!!...     ");
								z = _getch();
							} while (z != 0x7A);
							do {
								gotoxy(105, 14);
								color(6);
								printf("정말 미안해..여기 쪽지야..");
								z = _getch();
							} while (z != 0x7A);
							color(15);
							do {
								gotoxy(105, 14);
								printf("후우...얼른 집으로 돌아가자..");
								z = _getch();
							} while (z != 0x7A);
							gotoxy(105, 14);
							printf("                                        ");
							item.note++;
							item.Hong++;
						}
					}
				}
				if (CHong_hall[y][x / 2 + 1] == 'D' && CHong_hall[y + 1][x / 2 + 1] == 'D')
				{
					do {
						z = _getch();
						gotoxy(110, 14);
						printf(" 남자화장실 문이다. ");
					} while (z != 0x7A);
					gotoxy(110, 14);
					printf("                          ");
					if (z == 0x7A)
					{
						system("cls");
						Draw_bathroom(bathroom);
						sndPlaySoundA("c.wav", SND_ASYNC);
						Bath_move(30, 25);
					}
				}

			}
		}
		Print_timer();
	}
}

int main(void)
{
	color(15);
	char menu;
	system("mode con cols=120 lines=31");
	int time = 0;
	do
	{
		setcursortype(NOCURSOR);
		images(0, 0, 0);
		images(0, 0, 0);
		menu = _getch();
		system("cls");
		if (menu == '1') {
			system("mode con cols=80 lines=20");
			prolog();
			system("mode con cols=151 lines=31");
			Play_BGM(item.dwID);

			Draw_classroom(classroom, 30, 100);
			Class_move(16, 9);
		}
		if (menu == '2') {
			How();
			system("mode con cols=80 lines=20");
			prolog();
			system("mode con cols=151 lines=31");
			Play_BGM(item.dwID);

			Draw_classroom(classroom, 30, 100);
			Class_move(16, 9);
		}
		if (menu == '3') {
			exit(1);
			break;
		}
	} while (menu != 1 && menu != 2 && menu != 3);
}
